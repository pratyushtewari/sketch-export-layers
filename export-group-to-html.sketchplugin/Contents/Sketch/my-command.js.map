{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/json-to-css/index.js","webpack://exports/./node_modules/json-to-css/src/css.js","webpack://exports/./src/my-command.js","webpack://exports/external \"sketch\""],"names":["Css","require","onRun","context","sketch","UI","message","document","getSelectedDocument","selection","selectedLayers","spec","saveJSONObjToFile","jsonObj","pathString","file","NSString","stringWithString","JSON","stringify","path","alloc","initWithString_","stringByExpandingTildeInPath","url","NSURL","fileURLWithPath_","writeToFile_atomically_encoding_error","NSUTF8StringEncoding","saveJSONStringToFile","jsonString","exportIndividualLayer","object","type","name","toLowerCase","startsWith","exportandSpec","layers","length","forEach","layer","hidden","currentSelectionLayer","options","output","overwriting","trimming","export","i","jsonData","NSJSONSerialization","dataWithJSONObject_options_error_","sketchObject","treeAsDictionary","nil","initWithData_encoding_","indexhtml","objcStr","stringWithFormat","css","of","myjs","myjsjs"],"mappings":"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","file":"my-command.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/my-command.js\");\n","module.exports = require('./src/css')\n","'use strict'\n\nclass Css {\n  static of (json) {\n    const selectors = Object.keys(json)\n    return selectors.map((selector) => {\n      const definition = json[selector]\n      const rules = Object.keys(definition)\n      const result = rules.map((rule) => {\n        return `${rule}:${definition[rule]}`\n      }).join(';')\n      return `${selector}{${result}}`\n    }).join('\\n')\n  }\n}\n\nmodule.exports = Css","import sketch from 'sketch'\nconst Css = require('json-to-css')\n\nexport default function onRun(context) {\n  sketch.UI.message(\"Exporting ... Please Wait\");\n\n  var document = sketch.getSelectedDocument()\n  var selection = document.selectedLayers\n\n  var spec = {}\n  spec[\"img:hover\"] = {\n      \"outline\": 0,\n      \"box-shadow\": \"0 0 0 1px #BD10E0\"\n  } \n  spec['[data-name=\"MDSdescription\"] > img '] = {\"display\": \"none\", \"top\": \"0 !important\"}\n  spec['img.selected']={\"box-shadow\": \"0 0 0 1px #00ff2d\"}\n\n  // function saveToClipboard(string) {\n  //   var pasteBoard = NSPasteboard.generalPasteboard()\n  //   pasteBoard.clearContents()\n  //   pasteBoard.setString_forType(string, NSStringPboardType)\n  // }\n\n  function saveJSONObjToFile(jsonObj, pathString) {\n    var file = NSString.stringWithString(JSON.stringify(jsonObj, null, \"\\t\"));  \n    var path = NSString.alloc().initWithString_(pathString).stringByExpandingTildeInPath();\n    var url = NSURL.fileURLWithPath_(path);\n    file.writeToFile_atomically_encoding_error(url.path(),\n      true, NSUTF8StringEncoding, null)\n  }\n\n  function saveJSONStringToFile(jsonString, pathString) {\n    var path = NSString.alloc().initWithString_(pathString).stringByExpandingTildeInPath();\n    var url = NSURL.fileURLWithPath_(path);\n\n    jsonString.writeToFile_atomically_encoding_error(url.path(),\n      true, NSUTF8StringEncoding, null)\n  }\n\n\n  function exportIndividualLayer(object) {\n\n    if (object.type == 'Group' && (object.name.toLowerCase().startsWith(\"ico-\") || object.name.toLowerCase().startsWith(\"image-\"))) {\n      exportandSpec(object)\n      // Do return here since you dont want to continue further down the group\n      return;\n    }\n    if (object.layers && object.layers.length) {\n      // iterate through the children\n      object.layers.forEach(exportIndividualLayer)\n    }\n\n    exportandSpec(object)\n    // recursive return here (no need to write return explicitly since we dont use the result from previous recursion)\n  }\n  \n  function exportandSpec(layer) {\n    // return if the layer is hidden\n    if (layer.hidden) return;\n    // Because the text export in sketch is broken and it does not export the empty space.\n    // if (layer.type == \"text\") {\n    //   exportLayerWithPageRect(layer, document, 'png', '1', )\n    //   var slice = MSSliceLayer.new();\n    //   var parent = layer.parentGroup();\n    //   parent.addLayers([slice]);\n    // }\n\n    if (layer.type != \"Group\" || layer.name.toLowerCase().startsWith(\"ico-\") || layer.name.toLowerCase().startsWith(\"image-\") || layer.name.toLowerCase().startsWith(\"@\")) {\n      \n      // export as their id\n      var path = \"~/Desktop/\" + currentSelectionLayer.name\n      var options = {\n        output: path,\n        'use-id-for-name': true,\n        overwriting: true,\n        trimming: false\n      }\n      sketch.export(layer, options)\n    }\n  }\n  \n  var currentSelectionLayer\n  selection.forEach(function (layer, i) {\n    var path = \"~/Desktop/\" + layer.name\n    currentSelectionLayer = layer\n    exportIndividualLayer(layer)\n    saveJSONObjToFile(spec, path + \"/style.json\")\n\n    var jsonData = NSJSONSerialization.dataWithJSONObject_options_error_(layer.sketchObject.treeAsDictionary(), 0, nil);\n    var jsonString = NSString.alloc().initWithData_encoding_(jsonData, NSUTF8StringEncoding);\n    saveJSONStringToFile(\"data = \" + jsonString, path + \"/data.json\")\n\n    var indexhtml = `<!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\"/>\n          <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\n          <script src=\"data.js\"></script>\n          <script src=\"myjs.js\"></script>\n          <link rel=\"stylesheet\" href=\"data.css\">\n        </head>\n        <body>\n          <div id=\"main\" style=\"padding: 20px; position: relative;\">      \n        </div>\n        </body>\n      </html>`;\n    var objcStr = NSString.stringWithFormat(\"%@\", indexhtml);    \n    saveJSONStringToFile(objcStr, path + \"/index.html\")\n\n    var css = NSString.stringWithFormat(\"%@\", Css.of(spec));\n    saveJSONStringToFile(css, path + \"/data.css\")\n\n    var myjs = `\n    function layer2Html(layer) {\n      var html;\n      if (layer[\"<class>\"] == \"MSLayerGroup\" && !(layer.name.toLowerCase().startsWith(\"ico-\") || layer.name.toLowerCase().startsWith(\"image-\") || layer.name.toLowerCase().startsWith(\"@\"))) {\n        html = document.createElement(\"div\");\n      } else {\n        html = document.createElement(\"img\");\n        html.setAttribute(\"src\", layer.objectID + \".png\");\n      }\n      html.setAttribute(\"id\", \"MDS\" + layer.objectID.replace(/-/gi, \"\"));\n      html.setAttribute(\"data-name\", \"MDS\" + layer.name);   \n      html.setAttribute(\"style\",\"left: \" + layer.frame.x + \"px; top: \" + layer.frame.y + \"px; position: absolute;\" )      \n      if (layer.name.toLowerCase().startsWith(\"ico-\") || layer.name.toLowerCase().startsWith(\"image-\") || layer.name.toLowerCase().startsWith(\"@\")) {\n        return html;\n      }\n      if (layer.layers && layer.layers.length) {\n        layer.layers.forEach(layer => {\n          if (html.nodeName != \"IMG\") {\n            html.appendChild(layer2Html(layer))\n          }\n        });\n      }\n      return html;\n    }\n    $(document).ready(function () {\n      \n        var html = layer2Html(data);\n        html.style.top = \"0px\";\n        html.style.left = \"0px\";\n        document.getElementById(\"main\").appendChild(html);\n        $(\"img\").click(function (e) {    \n          $(\"img\").removeClass(\"selected\")\n          let name = $(this).addClass(\"selected\").attr(\"data-name\");\n          $('[data-name=\"MDSdescription\"] > img').hide();\n          let image = '[data-name=\"MDSdescription\"] > img[data-name=\"' + name + '\"]';\n          $(image).show();\n        });\n      \n    });\n    `\n    var myjsjs = NSString.stringWithFormat(\"%@\", myjs);\n    saveJSONStringToFile(myjsjs, path + \"/myjs.js\");\n  });\n  sketch.UI.message(\"Export is successfull 🙌\")\n}","module.exports = require(\"sketch\");"],"sourceRoot":""}